<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <style type="text/css">
  body{
    margin: 0;
    padding: 0;
  }
.pubu{
    position: absolute;
    width: 1100px;
    left: 50%;
    margin-left: -550px;
}
.box{
    padding:20px 0 0 20px;
    float: left;
}
.box img{
    width: 200px;
    height: auto;
    opacity: 0;
}
  </style>
</head>
<body>
    <div class="pubu">
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
         <div class="box">
              <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
         <div class="box">
              <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
        </div>
        <div class="box">
              <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
              <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
             <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
        </div>
        <div class="box">
            <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
        </div>
      </div>
<script type="text/javascript">
window.onload = function(){
  var oBox=document.getElementsByClassName("box");
  var oImg=document.getElementsByTagName('img');
  var oBoxw=oBox[0].offsetWidth;
  var cols=5;

  loadImg(oImg);
  window.onscroll = function(){
    loadImg(oImg);
  };

  function waterfall(ele,col,eleWidth){
    var hArr = [];
    for(var i = 0;i < ele.length;i++){
        if(i < col){
            hArr.push(ele[i].offsetHeight);
        }else{
            //min不能用于数组，apply的第一个参数传递作用域，第二个参数传递数组。Math.min.apply(null, [1, 2, 3]) 等价于 Math.min(1, 2, 3)
            var minH = Math.min.apply(null,hArr);
            var index = hArr.indexOf(minH);
            ele[i].style.position = 'absolute';   
            ele[i].style.top = minH + 'px';           //ele.style.left/top 是有px的，而offsetHeight/offsetWidth是没有px的
            ele[i].style.left = index * eleWidth + 'px';
            hArr[index] += ele[i].offsetHeight;
        }
    }
  }

  function loadImg(arr){
  for( var i = 0,len = arr.length; i < len; i++){
    //判断图片相对应视图窗口的高度是否小于屏幕可视窗口大小
    if(arr[i].getBoundingClientRect().top < document.documentElement.clientHeight && !arr[i].isLoad){  //判断图片
      arr[i].isLoad = true;
      if(arr[i].dataset){                    //判断是否存在HTML5的dataset对象
        aftLoadImg(arr[i],arr[i].dataset.original);    
      }else{
        aftLoadImg(arr[i],arr[i].getAttribute("data-original"));
      }
      arr[i].style.cssText = "transition: opacity 4s; opacity: 1;"    //使opacity变化在4秒内完成
    }
  }
}

function aftLoadImg(obj,url){
  obj.src = url;
  waterfall(oBox,cols,oBoxw);   //需要再次调用瀑布流方法
}
}
</script>
</body>
</html>
